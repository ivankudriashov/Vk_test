(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,c=new Array(e);n<e;n++)c[n]=t[n];return c}var e,n,c,a,i,o,s,l=!1,r=!1,u="normal",d=0,p=0,f=0,g=0,y=40,x=16,m=17,b=document.querySelector(".board"),h=document.querySelector(".board-wrap"),v=document.querySelector(".minesweeper-btn"),L=document.querySelector(".fieldset"),k=(L.querySelectorAll("label"),document.querySelectorAll(".wrapper-border-vert")),P=document.querySelectorAll(".js-timer-num"),E=document.querySelectorAll(".js-bombs-num"),q=[],A=[],S=["0 17px","-17px 17px","-34px 17px","-51px 17px","-67px 17px","54px 17px","38px 17px","20px 17px"],I={0:"13px 0",1:"0 0",2:"-14px 0",3:"-28px 0",4:"-42px 0",5:"-56px 0",6:"69px 0",7:"55px 0",8:"41px 0",9:"27px 0"};function w(){clearInterval(e),clearInterval(n),clearInterval(c),clearInterval(a)}function j(){s=y>=100?String(y):y>=10?"0"+y:"00"+y,E.forEach((function(t,e){t.style.backgroundPosition=I["".concat(s[e])]}))}function M(){r=!1,l=!1,y="normal"===u?40:"easy"===u?10:99,q=[],A=[],d=0,p=0,f=0,g=0,i.forEach((function(t){t.remove()})),w(),D()}function D(){j(),P.forEach((function(t){t.style.backgroundPosition=I[0]}));for(var t=0;t<Math.pow(x,2);t++){var e=document.createElement("div");e.classList.add("tile"),b.appendChild(e)}i=document.querySelectorAll(".tile"),o=Math.sqrt(i.length),b.style.width=o*m+"px",b.style.height=o*m+"px",h.style.height=o*m+"px",k.forEach((function(t){t.style.height="".concat(t.parentElement.clientHeight,"px")})),document.documentElement.style.setProperty("--tileSize","".concat(m,"px")),document.documentElement.style.setProperty("--boardSize","".concat(o*m,"px"))}function O(t){v.style.backgroundPosition="32px 60px",r=!0,i.forEach((function(e){var n=e.getAttribute("data-tile");q.includes(n)?t===e?(e.classList.add("tile--checked","tile--bomb"),e.style.backgroundPosition="38px 34px"):e.classList.contains("tile--flagged")?e.classList.contains("tile--flagged")&&(e.classList.add("tile--checked","tile--bomb"),e.style.backgroundPosition="-34px 34px"):(e.classList.add("tile--checked","tile--bomb"),e.style.backgroundPosition="54px 34px"):e.classList.contains("tile--flagged")?(e.classList.add("tile--checked"),e.style.backgroundPosition="20px 34px"):e.classList.contains("tile--question")&&(e.classList.add("tile--checked"),e.style.backgroundPosition="72px 34px")}))}function z(){var t=!0;i.forEach((function(e){var n=e.getAttribute("data-tile");e.classList.contains("tile--checked")||q.includes(n)||(t=!1)})),t&&(v.style.backgroundPosition="58px 60px",r=!0,w())}function C(){1e3==++d&&O(),r&&w()}function H(){10==++p&&(p=0),P[0].style.backgroundPosition=I["".concat(p)]}function T(){10==++f&&(f=0),P[1].style.backgroundPosition=I["".concat(f)]}function U(){10==++g&&(g=0),P[2].style.backgroundPosition=I["".concat(g)]}function $(t,e){var n=t+Math.random()*(e+1-t);return Math.floor(n)}b.addEventListener("click",(function(s){s.target.classList.contains("tile")&&!l&&(function(t){e=setInterval(C,1e3),n=setInterval(H,1e5),c=setInterval(T,1e4),a=setInterval(U,1e3);var s=0,l=0;i.forEach((function(t){t.setAttribute("data-tile","".concat(s,",").concat(l)),++s>=o&&(s=0,l++)}));for(var r=0;r<y;){var u=$(0,x-1),d=$(0,x-1);q.includes("".concat(u,",").concat(d))||t.target.getAttribute("data-tile")==="".concat(u,",").concat(d)||(r+=1,q.push("".concat(u,",").concat(d)),u>0&&A.push("".concat(u-1,",").concat(d)),u<o-1&&A.push("".concat(u+1,",").concat(d)),d>0&&A.push("".concat(u,",").concat(d-1)),d<o-1&&A.push("".concat(u,",").concat(d+1)),u>0&&d>0&&A.push("".concat(u-1,",").concat(d-1)),u<o-1&&d<o-1&&A.push("".concat(u+1,",").concat(d+1)),d>0&&u<o-1&&A.push("".concat(u+1,",").concat(d-1)),u>0&&d<o-1&&A.push("".concat(u-1,",").concat(d+1)))}A.forEach((function(t){var e=t.split(","),n=document.querySelector('[data-tile="'.concat(parseInt(e[0]),",").concat(parseInt(e[1]),'"]')),c=parseInt(n.getAttribute("data-num"));c||(c=0),n.setAttribute("data-num",c+1)}))}(s),l=!0),s.target.classList.contains("tile")&&function(e){var n,c,a=e;if(!r&&!(a.classList.contains("tile--checked")||a.classList.contains("tile--flagged")||a.classList.contains("tile--question"))){var i,o=a.getAttribute("data-tile"),s=o.split(","),l=parseInt(s[0]),u=parseInt(s[1]);if(i=a.getAttribute("data-num"),q.includes(o))O(a);else{if(null!=i)return a.classList.add("tile--checked"),a.classList.add("tile--num".concat(i)),a.style.backgroundPosition="".concat(S[parseInt(i)-1]),void z();var d=[],p=function(t,e){if(t>=0&&t<x&&e>=0&&e<x){var n=document.querySelector('[data-tile="'.concat(t,",").concat(e,'"'));if(n.classList.contains("tile--checked")||n.classList.contains("tile--flagged")||n.classList.contains("tile--question"))return;d.push([t,e])}};for(p(l,u);d.length;){var f=(n=d.pop(),c=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var c,a,i,o,s=[],l=!0,r=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(c=i.call(n)).done)&&(s.push(c.value),s.length!==e);l=!0);}catch(t){r=!0,a=t}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(r)throw a}}return s}}(n,c)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var c=Object.prototype.toString.call(e).slice(8,-1);return"Object"===c&&e.constructor&&(c=e.constructor.name),"Map"===c||"Set"===c?Array.from(e):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?t(e,n):void 0}}(n,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),g=f[0],y=f[1],m=document.querySelector('[data-tile="'.concat(g,",").concat(y,'"'));null==(i=m.getAttribute("data-num"))?(m.classList.add("tile--checked"),m.style.backgroundPosition="-17px 34px",p(g+1,y),p(g-1,y),p(g,y+1),p(g,y-1),p(g+1,y+1),p(g+1,y-1),p(g-1,y-1),p(g-1,y+1)):(m.classList.add("tile--checked"),m.classList.add("tile--num".concat(i)),m.style.backgroundPosition="".concat(S[parseInt(i)-1]),z())}}}}(s.target)})),b.addEventListener("contextmenu",(function(t){var e;t.preventDefault(),t.target.classList.contains("tile")&&(e=t.target,r||e.classList.contains("tile--checked")||(e.classList.contains("tile--flagged")||e.classList.contains("tile--question")||0===y?e.classList.contains("tile--flagged")?(e.style.backgroundPosition="-50px 34px",e.classList.remove("tile--flagged"),e.classList.add("tile--question"),++y,j()):(e.style.backgroundPosition="1px 34px",e.classList.remove("tile--question")):(e.style.backgroundPosition="-33px 34px",e.classList.add("tile--flagged"),--y,j())))})),b.addEventListener("mousedown",(function(t){!t.target.classList.contains("tile")||t.target.classList.contains("tile--checked")||t.target.classList.contains("tile--flagged")||t.target.classList.contains("tile--question")||r||(v.style.backgroundPosition="-54px 60px")})),b.addEventListener("mouseup",(function(t){t.target.classList.contains("tile")&&!r&&(v.style.backgroundPosition="0 60px")})),v.addEventListener("click",(function(t){t.preventDefault(),M()})),v.addEventListener("mouseup",(function(t){t.preventDefault(),v.style.backgroundPosition="0 60px"})),v.addEventListener("mousedown",(function(t){t.preventDefault(),v.style.backgroundPosition="-28px 60px"})),L.addEventListener("click",(function(t){t.target.classList.contains("difficulty")&&(u=t.target.value,y="normal"===u?40:"easy"===u?10:99,x="normal"===u?16:"easy"===u?9:22,M())})),D()})();